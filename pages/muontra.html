<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Quáº£n lÃ½ MÆ°á»£n â€“ Tráº£</title>

<!-- Bootstrap 5 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>

<div class="container mt-4">

<h3 class="mb-3">ğŸ”„ Quáº£n lÃ½ MÆ°á»£n â€“ Tráº£ ThÆ° viá»‡n</h3>

<!-- Tabs -->
<ul class="nav nav-tabs mb-3">
  <li class="nav-item">
    <button class="nav-link active" onclick="showBorrow()">ğŸ“˜ Äang mÆ°á»£n</button>
  </li>
  <li class="nav-item">
    <button class="nav-link" onclick="showReturn()">ğŸ“• ÄÃ£ tráº£</button>
  </li>
</ul>

<!-- Table -->
<table class="table table-bordered text-center align-middle">
<thead class="table-dark">
<tr>
  <th>ID</th>
  <th>Äá»™c giáº£</th>
  <th>NgÃ y mÆ°á»£n</th>
  <th>Háº¡n tráº£</th>
  <th>Tráº¡ng thÃ¡i</th>
  <th>Thao tÃ¡c</th>
</tr>
</thead>

<tbody id="borrowTable">

<tr>
  <td>1</td>
  <td>Nguyá»…n VÄƒn C</td>
  <td>2025-01-01</td>
  <td>2025-01-10</td>
  <td class="status"></td>
  <td>
    <button class="btn btn-success btn-sm" onclick="markReturned(this)">
      Tráº£ sÃ¡ch
    </button>
  </td>
</tr>

<tr>
  <td>2</td>
  <td>Tráº§n Thá»‹ D</td>
  <td>2025-01-15</td>
  <td>2025-01-30</td>
  <td class="status"></td>
  <td>
    <button class="btn btn-success btn-sm" onclick="markReturned(this)">
      Tráº£ sÃ¡ch
    </button>
  </td>
</tr>

</tbody>
</table>

</div>

<!-- JavaScript -->
<script>

// Cáº­p nháº­t tráº¡ng thÃ¡i theo thá»i gian thá»±c
function updateStatus() {
    let today = new Date().toISOString().split("T")[0];

    document.querySelectorAll("#borrowTable tr").forEach(row => {
        let dueDate = row.cells[3].innerText;
        let statusCell = row.querySelector(".status");

        // Náº¿u chÆ°a tráº£
        if (statusCell.innerText !== "ÄÃ£ tráº£") {
            if (dueDate < today) {
                statusCell.innerHTML = "<span class='text-danger fw-bold'>QuÃ¡ háº¡n</span>";
            } else {
                statusCell.innerHTML = "<span class='text-primary'>Äang mÆ°á»£n</span>";
            }
        }
    });
}

// Báº¥m tráº£ sÃ¡ch
function markReturned(btn) {
    let row = btn.closest("tr");
    row.querySelector(".status").innerHTML =
        "<span class='text-success fw-bold'>ÄÃ£ tráº£</span>";
    btn.remove();
}

// Tab Äang mÆ°á»£n
function showBorrow() {
    document.querySelectorAll("#borrowTable tr").forEach(row => {
        let status = row.querySelector(".status").innerText;
        row.style.display = (status === "ÄÃ£ tráº£") ? "none" : "";
    });

    setActiveTab(0);
}

// Tab ÄÃ£ tráº£
function showReturn() {
    document.querySelectorAll("#borrowTable tr").forEach(row => {
        let status = row.querySelector(".status").innerText;
        row.style.display = (status === "ÄÃ£ tráº£") ? "" : "none";
    });

    setActiveTab(1);
}

// Äá»•i tab active
function setActiveTab(index) {
    let tabs = document.querySelectorAll(".nav-link");
    tabs.forEach(t => t.classList.remove("active"));
    tabs[index].classList.add("active");
}

// Load trang
updateStatus();

</script>

</body>
</html>
